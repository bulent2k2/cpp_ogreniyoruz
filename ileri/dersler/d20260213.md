[Ä°ki takÄ±m kurmak](https://cses.fi/problemset/task/1668)
====

Bir sÄ±nÄ±f Ã¶ÄŸrenciyi iki takÄ±ma bÃ¶leceÄŸiz. TakÄ±mlarda aynÄ± sayÄ±da Ã¶ÄŸrenci olmasÄ± gerekmiyor.
Ama arkadaÅŸlar farklÄ± takÄ±mda olmalÄ±. Yani iki Ã¶ÄŸrenci birbirleriyle arkadaÅŸlarsa karÅŸÄ± takÄ±mlarda olmalarÄ±nÄ± istiyoruz.

Derste bahsetmedik ama bu soru bir Ã§izgenin **bipartite** olup olmadÄ±ÄŸÄ±nÄ± bulmaya denk geliyor. 
TÃ¼rkÃ§e wikide *[iki parÃ§alÄ± graf](https://tr.wikipedia.org/wiki/%C4%B0ki_par%C3%A7al%C4%B1_graf)* demiÅŸler. 
Ä°ki parÃ§ayla kasÄ±t bÃ¼tÃ¼n noktalar iki altkÃ¼meye ayrÄ±lÄ±yor ama 
altkÃ¼me iÃ§indeki noktalarÄ±n arasÄ±nda hiÃ§ baÄŸ olmamasÄ± gerekiyor. 
[Ä°ngilizce wikide](https://en.wikipedia.org/wiki/Bipartite_graph) daha Ã§ok bilgi ve Ã¶rnek var.

Ã–nce gerekli tÃ¼rleri tanÄ±mladÄ±k:
```c++
using ArkadaÅŸ = unsigned; // ArkadaÅŸ ya da Ã–ÄŸrenci: 1, 2, ..., n
using ArkadaÅŸlar = std::vector<ArkadaÅŸ>; // her Ã¶ÄŸrencinin bir arkadaÅŸ dizisi var
// bÃ¼tÃ¼n arkadaÅŸlÄ±klarÄ± temsil edecek Ã§izgeyi tanÄ±mlamak da kolaylaÅŸtÄ±:
std::vector<ArkadaÅŸlar> sÄ±nÄ±f; // Ã¶rneÄŸin sÄ±nÄ±f[2], 2. Ã¶ÄŸrencinin bÃ¼tÃ¼n arkadaÅŸlarÄ±nÄ±n bulunduÄŸu dizi
using TakÄ±m = unsigned; // 0 (henÃ¼z bir takÄ±ma dahil edilmedi), 1 ya da 2 
std::vector<TakÄ±m> takÄ±m; // takÄ±m[1]: 1. Ã¶ÄŸrencinin takÄ±mÄ±
```
Derste vaktimiz olmadÄ±, ama sonra ufak bir iyileÅŸtirme yaptÄ±m. `TakÄ±m` tÃ¼rÃ¼nÃ¼ biraz daha anlanmlÄ± olsun ve `enum class` anahtar sÃ¶zcÃ¼klerini de tanÄ±yalÄ±m diye ÅŸÃ¶yle tanÄ±mladÄ±m:
```c++
enum class TakÄ±m { Yok, Bir, Ä°ki };
```
Az sayÄ±da geÃ§erli deÄŸeri olan tÃ¼rleri bÃ¶yle tanÄ±mlayabiliyoruz. AÅŸaÄŸÄ±daki kodu okuyun hemen anlarsÄ±nÄ±z. Bu sadece okunurluÄŸu arttÄ±rmakla kalmÄ±yor, pekÃ§ok hataya de engel oluyor. Ã–rneÄŸin, yanlÄ±ÅŸlÄ±kla 3. bir takÄ±m kurmaya kalksak, derleyici hemen olmaz diyor.  

Ä°ki takÄ±m kurma problemini derinleme geziyle Ã§Ã¶zebiliriz dedik ve Ã¶zyineleme kullandÄ±k:
```c++
bool dgez(ArkadaÅŸ a) {
    for (ArkadaÅŸ b : sÄ±nÄ±f[a]) // a'nÄ±n arkadaÅŸlarÄ± iÃ§in
        if (takÄ±m[b] != TakÄ±m::Yok) { // bu arkadaÅŸ daha Ã¶nce ziyaret edilmiÅŸ bile
            if (takÄ±m[b] == takÄ±m[a]) // bipartite deÄŸilse bu koÅŸul doÄŸru olacak.
                return false;  // o durumda iki takÄ±m olamaz
        } else {   // ilk hata bÃ¶yle dÃ¼zeldi
            using enum TakÄ±m;   // tÃ¼r adÄ±nÄ± yazmak gerekmesin diye
            takÄ±m[b] = takÄ±m[a] == Bir ? Ä°ki : Bir;
            if (not dgez(b))  // a'nÄ±n arkadaÅŸlarÄ±yla geziye devam
                return false;
        }
    return true; // olur
}
```
Ã–ÄŸrendiklerimizin pekiÅŸmesi iÃ§in Ã¶zyineleme tekniÄŸi yerine `std::stack` kullanarak tekrar yazmanÄ±zÄ± Ã¶neririm. FaydalÄ± olur.
Derste `dgez(ArkadaÅŸ)` iÅŸlevini direk `main()` iÃ§inden Ã§aÄŸÄ±rdÄ±k. Ama dersten sonra yeni bir iÅŸlev iÃ§ine koydum, daha iyi oldu:
```c++
bool bul(int n) {
    for (ArkadaÅŸ a=1; a <= n; ++a) {
        if (takÄ±m[a] == TakÄ±m::Yok) { // ikinci hata da bÃ¶yle dÃ¼zeldi
            takÄ±m[a] = TakÄ±m::Bir;
            if (not dgez(a))
                return false;
        }
    }
    return true;
}
```
Ä°ki takÄ±m bulursak ÅŸÃ¶yle yazabiliriz:
```c++
void yaz() {
    takÄ±m.erase(takÄ±m.begin()); // ilk elemanÄ± silelim ki yazÄ±lmasÄ±n. Ã–ÄŸrenciler 1'den baÅŸlÄ±yor
    for (TakÄ±m t : takÄ±m) 
        std::cout << (t == TakÄ±m::Bir ? 1 : 2) << " ";
}
```
Yoksa olmaz diyoruz:
```c++
    if (not bul(n)) std::cout << "IMPOSSIBLE";
    else yaz();
```
Bu iyileÅŸtirilmiÅŸ kodun [hepsi testlerle birlikte burada](https://onlinegdb.com/HSBLQce38). Derste yazdÄ±ÄŸÄ±mÄ±z kodla karÅŸÄ±laÅŸtÄ±rmak isterseniz, o da [testleriyle birlikte burada](https://www.onlinegdb.com/LqO6HQbOQ). BaÅŸta Ã§abucak yazdÄ±k onun iÃ§in tÃ¶kezledik!
Bir iki hata yaptÄ±k. Ama bence iyi oldu, **debugger**'Ä± kullanmaya baÅŸladÄ±k. 
*C*, *C++*, *Go* ve baÅŸka pekÃ§ok bilgisayar dilinin efsanevi yazÄ±lÄ±mÄ± **gdb** ([GNU](https://www.gnu.org/)'nun [debugger uygulamasÄ±](https://www.sourceware.org/gdb/)) ile tanÄ±ÅŸtÄ±k. Åu hatalarÄ± bulmamÄ±za yardÄ±m etti:  
1.  `dgez()` iÃ§indeki `else` koÅŸulu eksikti. Taban koÅŸul olarak daha Ã¶nce takÄ±ma giren bir arkadaÅŸla karÅŸÄ±laÅŸÄ±nca gezmeyi sonlandÄ±rmamÄ±z gerek. Ã–zyinelemeli iÅŸlevlerde taban koÅŸulu olmazsa olmaz!
2. `bul()` iÃ§indeki ilk `for` dÃ¶ngÃ¼sÃ¼nÃ¼n ilk `if` koÅŸulu eksikti. Birinci hatada olduÄŸu gibi, daha Ã¶nce bir takÄ±ma konan bir Ã¶ÄŸrenciyi birinci takÄ±ma sokmak ve yeni bir gezi baÅŸlatmak yanlÄ±ÅŸ oldu. Peki bu `for` dÃ¶ngÃ¼sÃ¼ hiÃ§ olmasa olur mu? Ã‡izgede en az iki *kopuk parÃ§a* varsa olmaz. Neden, anladÄ±nÄ±z deÄŸil mi?

Gelecek derste Ã§izgeler kuramÄ±ndan problemler ve Ã§izgeler Ã¼zerinde Ã§alÄ±ÅŸan algoritmalarÄ± gÃ¶rmeye devam edelim mi? Ä°sterseniz bir sonraki [gidiÅŸ dÃ¶nÃ¼ÅŸ problemine](https://cses.fi/problemset/task/1669) bakalÄ±m. YÃ¶nsÃ¼z Ã§izgelerde gÃ¼zel bir dÃ¶ngÃ¼ bulmaya Ã§alÄ±ÅŸalÄ±m. Bu arada vaktiniz olursa, [TÃ¼rkÃ§e vikiden *graf* maddesine](https://tr.wikipedia.org/wiki/Graf_(matematik)) bakÄ±verin, olur mu? Graf (Ä°ngilizcesi graph) yerine *Ã§izge*, dÃ¼ÄŸÃ¼m (vertex) yerine *nokta* ve kenar (edge) yerine de *baÄŸ* desek daha gÃ¼zel olur mu sizce de? Belki de bir kavrama birden fazla isim takmakta da bir hayÄ±r var!

Ã‡izgeler, matematiksel dÃ¼nyadan fiziksel dÃ¼nyaya dokunan, hem gÃ¶rsel hem de Ã§ok kullanÄ±ÅŸlÄ± kavramlardan biri. Ã‡izgeler kuramÄ±nÄ±n tarihten bildiÄŸimiz ilk uygulamasÄ±nÄ± merak ederseniz, [meÅŸhur 7 kÃ¶prÃ¼ problemini buradan okuyabilirsiniz](https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg).     
<p align="center">
<img src="resim/konigsberg-kopruleri.png" alt="ufak bir aÄŸ" width="300"/>   
</p>
Sizi bilmem ama hocanÄ±z matematiÄŸin her tÃ¼rÃ¼nÃ¼ sever: cebir, geometri, kalkÃ¼lÃ¼s, bilhassa karmaÅŸÄ±k sayÄ±larÄ±n analizi, olasÄ±lÄ±k, vb.. ama gÃ¶nlÃ¼nde bu Ã§izgelerin yeri bir baÅŸka! Ã–te yandan sizin de matematikle arasÄ± bozuk, "matematiÄŸi iyi bilmesek ne olur" diyen tanÄ±dÄ±klarÄ±nÄ±z olmuÅŸtur belki. Onlara aÅŸaÄŸÄ±daki resmi gÃ¶stermeli. *Pi* sayÄ±sÄ± `3` olsun, yerÃ§ekimi katsayÄ±sÄ± *g* de `10` olsun diyenler kÃ¶prÃ¼ yapmaya kalksa aÅŸaÄŸÄ±daki gibi olurdu herhalde! ğŸ˜Š   
<p align="center">
<img src="resim/matematik-ne-ise-yarar.png" alt="pi 3 olsun g de 10" width="300"/>    
</p>
