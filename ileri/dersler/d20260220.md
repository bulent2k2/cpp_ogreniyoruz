[Güzel bir Gidiş Dönüş Gezintisi Yapalım](https://cses.fi/problemset/task/1669) 
===


Derinlemesine gezi için şöyle bir kalıp görmüştük daha önce: 

```c++
void gez(Nokta n) {
    if (gezildi[n]) return;
    gezildi[n] = true;
    for (Nokta komşu: komşular[n])
        gez(komşu);
}
```
Birkaç problemin çözümünde bu kalıp çok faydalı oldu. Bu problem de benzer bir yöntemle çözülebiliyor. Her hangi bir şehirden başlayan ve aynı şehre dönen bir yol bulmak istiyoruz. En basiti `A -> B -> A` elbet ama başlangıç şehri `A` dışında en az iki tane şehir daha görmek istiyoruz. Öte yandan `A -> B -> C -> B -> A` gibi geziler de sayılmıyor, çünkü arada gezdigimiz `B` şehri iki kere ziyaret edilmiş. Aradaki şehirleri sadece bir kere ziyaret etmek istiyoruz. Bu arada, bu tür gidiş dönüş yollarına genelde *çevrim* (İngilizcesi *cycle*) deniyor.  Bahsettiğimiz koşulları sağlayan yani "güzel" bir çevrim arıyoruz.

Şimdi yukarıdaki kalıba ufak birkaç değişikle tekrar bakalım: 
```c++
void gez(Şehir ş, Şehir önceki=0) { 
    yol.push_back(ş);
    if (gezildi[ş]) {
        yolu_yaz(ş);
        exit(0); 
    }
    gezildi[ş] = true;
    for (Şehir komşu: komşular[ş]) 
       if (komşu != önceki) 
           gez(komşu, ş);
    yol.pop_back();
}
``` 
Gittiğimiz yol üzerinde bir önceki şehri hatırlamak için, ikinci parametreyi girdi olarak ekledik. Gezmeye başladığımız şehrin öncesi olmadığı belirtmek için de `0` değerini varsaydık. Şöyle de çağırabiliriz bu özyineleyen işlevi:
```c++
Şehir ilk=n; // herhangi bir şehirden başlayabiliriz
gez(ilk);
```
İkinci değişiklik, `yol` dizisi:
```c++ 
std::vector<Şehir> yol;
```
Derinlemesine geziyle oluşan yolu belleğe yazıyor. Eğer güzel bir çevrim bulmuşsak, yolu yazıp `exit(0)` ile programı sonlandırıyoruz. 

Son değişiklik de `for` döngüsü içinde. Önceki şehre dönmeye engel oluyoruz ki `A -> B -> A` gibi çevrimleri dikkate almayalım.

Son olarak da yolu ekrana nasıl yazıyoruz, onu görelim:
```c++
void yolu_yaz(Şehir ev) {
    // evi gösteren akıllı adres:         
    auto eg = std::find(yol.begin(), yol.end(), ev);
    // gidiş dönüş gezisini bulmak için,      
    // evden başlayarak yolun sonuna kadar kopyalıyoruz şehirleri     
    Şehirler gd(eg, yol.end());    
    std::cout << gd.size() << '\n';    
    for(auto s: gd) std::cout << s << " ";
}
```

Yukarıdaki örnek kodları tam çalışır halde [burada görebilirsiniz](https://onlinegdb.com/QnIR-y7g-). Dersten [kodumuz burada](https://onlinegdb.com/T0Sq6XYll).

CSES’e girip test etmek isterseniz, ufak bir değişiklik gerekiyor. “algorithm” başlığı olmazsa hata veriyor. Örnek [çözüm de burada](https://cses.fi/paste/f0f8b043b5c14f21f92a28/).

İnternet bağlantısı zayıf olan arkadaşınızın istediği [video kayıt burada]( https://drive.google.com/file/d/1O6xMJihVeMSkkUIbu2sVi1NgI9YSwjbH).